<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>技術部門 工程管理システム</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px -8px rgba(0, 0, 0, 0.15);
    }
    .card-hover {
      transition: all 0.3s ease;
    }
    .progress-bar {
      height: 8px;
      border-radius: 4px;
      overflow: hidden;
      background-color: #e5e7eb;
    }
    .gantt-bar {
      height: 24px;
      border-radius: 4px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    .gantt-bar:hover {
      transform: scaleY(1.1);
      z-index: 10;
    }
    .gantt-bar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.2) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.2) 75%, transparent 75%);
      background-size: 8px 8px;
    }
    .critical-path {
      box-shadow: 0 0 0 2px #ef4444;
      animation: criticalPulse 2s infinite;
    }
    @keyframes criticalPulse {
      0%, 100% { box-shadow: 0 0 0 2px #ef4444; }
      50% { box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.5); }
    }
    .milestone {
      position: relative;
    }
    .milestone::after {
      content: '◆';
      position: absolute;
      top: -2px;
      right: -8px;
      color: #fbbf24;
      font-size: 16px;
    }
    .risk-alert {
      animation: riskPulse 1.5s infinite;
    }
    @keyframes riskPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }
    .drag-handle {
      cursor: grab;
    }
    .drag-handle:active {
      cursor: grabbing;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- ヘッダー -->
  <header class="bg-gradient-to-r from-blue-800 to-blue-900 text-white shadow-lg">
    <div class="container mx-auto px-4 py-4">
      <div class="flex justify-between items-center">
        <div class="flex items-center">
          <i class="fas fa-project-diagram text-2xl mr-3"></i>
          <div>
            <h1 class="text-xl font-bold">技術部門 工程管理システム</h1>
            <p class="text-blue-200 text-sm">Technical Project Schedule Management</p>
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <div class="relative">
            <button class="p-2 hover:bg-blue-700 rounded-full transition-colors">
              <i class="fas fa-bell text-lg"></i>
              <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">5</span>
            </button>
          </div>
          <div class="flex items-center space-x-2">
            <div class="text-right">
              <div class="font-semibold text-sm">山田 健太郎</div>
              <div class="text-xs text-blue-200">営業部長</div>
            </div>
            <div class="w-8 h-8 bg-white text-blue-800 rounded-full flex items-center justify-center font-bold text-sm">
              YK
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container mx-auto px-4 py-6">
    <!-- パンくずリスト -->
    <nav class="bg-white rounded-lg shadow-md p-4 mb-6">
      <div class="flex items-center space-x-2 text-sm">
        <a href="#" class="text-blue-600 hover:text-blue-800 hover:underline flex items-center">
          <i class="fas fa-home mr-1"></i>ホーム
        </a>
        <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
        <a href="#" class="text-blue-600 hover:text-blue-800 hover:underline">技術部門</a>
        <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
        <span class="text-gray-800 font-semibold">工程管理</span>
      </div>
      
      <div class="mt-3 pt-3 border-t border-gray-200">
        <div class="flex items-center space-x-4">
          <span class="text-xs text-gray-500 font-medium">関連画面:</span>
          <a href="#" class="text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center">
            <i class="fas fa-users-cog mr-1"></i>担当者アサイン
          </a>
          <a href="#" class="text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center">
            <i class="fas fa-shopping-cart mr-1"></i>発注管理
          </a>
          <a href="#" class="text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center">
            <i class="fas fa-clipboard-check mr-1"></i>検査記録
          </a>
          <a href="#" class="text-xs text-blue-600 hover:text-blue-800 hover:underline flex items-center">
            <i class="fas fa-history mr-1"></i>活動履歴
          </a>
        </div>
      </div>
    </nav>

    <!-- サマリーカード -->
    <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-6">
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
            <i class="fas fa-tasks text-blue-600 text-xl"></i>
          </div>
          <div>
            <div class="text-2xl font-bold text-gray-800">23</div>
            <div class="text-sm text-gray-600">進行中PJ</div>
          </div>
        </div>
      </div>
      
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-3">
            <i class="fas fa-check-circle text-green-600 text-xl"></i>
          </div>
          <div>
            <div class="text-2xl font-bold text-gray-800">87%</div>
            <div class="text-sm text-gray-600">予定通り</div>
          </div>
        </div>
      </div>
      
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mr-3">
            <i class="fas fa-exclamation-triangle text-yellow-600 text-xl"></i>
          </div>
          <div>
            <div class="text-2xl font-bold text-gray-800">3</div>
            <div class="text-sm text-gray-600">遅延リスク</div>
          </div>
        </div>
      </div>
      
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mr-3">
            <i class="fas fa-clock text-red-600 text-xl"></i>
          </div>
          <div>
            <div class="text-2xl font-bold text-gray-800">2</div>
            <div class="text-sm text-gray-600">期限超過</div>
          </div>
        </div>
      </div>
      
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
            <i class="fas fa-route text-purple-600 text-xl"></i>
          </div>
          <div>
            <div class="text-2xl font-bold text-gray-800">5</div>
            <div class="text-sm text-gray-600">ｸﾘﾃｨｶﾙﾊﾟｽ</div>
          </div>
        </div>
      </div>
      
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <div class="flex items-center">
          <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
            <i class="fas fa-flag text-indigo-600 text-xl"></i>
          </div>
          <div>
            <div class="text-2xl font-bold text-gray-800">8</div>
            <div class="text-sm text-gray-600">今月完工</div>
          </div>
        </div>
      </div>
    </div>

    <!-- アラートとクイックアクション -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
      <!-- 遅延リスクアラート -->
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <h3 class="font-bold text-gray-800 mb-3 flex items-center">
          <i class="fas fa-exclamation-triangle text-red-500 mr-2 risk-alert"></i>
          遅延リスクアラート
        </h3>
        <div class="space-y-2">
          <div class="p-3 bg-red-50 border-l-4 border-red-400 rounded">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-sm font-medium text-red-800">2025-ME0123 ABC工場</div>
                <div class="text-xs text-red-600">電気工事3日遅延・クリティカルパス</div>
              </div>
              <button class="text-xs text-blue-600 hover:text-blue-800 font-medium">対応</button>
            </div>
          </div>
          <div class="p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-sm font-medium text-yellow-800">2025-AU0125 GHI商事</div>
                <div class="text-xs text-yellow-600">制御機器納期遅延の可能性</div>
              </div>
              <button class="text-xs text-blue-600 hover:text-blue-800 font-medium">確認</button>
            </div>
          </div>
          <div class="p-3 bg-orange-50 border-l-4 border-orange-400 rounded">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-sm font-medium text-orange-800">2025-ME0135 YZ工場</div>
                <div class="text-xs text-orange-600">設計変更による工程見直し要</div>
              </div>
              <button class="text-xs text-blue-600 hover:text-blue-800 font-medium">調整</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 今日のマイルストーン -->
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <h3 class="font-bold text-gray-800 mb-3 flex items-center">
          <i class="fas fa-flag text-green-500 mr-2"></i>
          今日のマイルストーン
        </h3>
        <div class="space-y-3">
          <div class="p-3 bg-green-50 rounded">
            <div class="text-sm font-medium text-green-800">2025-ME0126 JKL工場</div>
            <div class="text-xs text-green-600 mb-2">空調機器搬入・設置完了</div>
            <div class="flex items-center space-x-2">
              <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">完了</span>
              <button class="px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700">
                次工程開始
              </button>
            </div>
          </div>
          <div class="p-3 bg-blue-50 rounded">
            <div class="text-sm font-medium text-blue-800">2025-EL0124 DEF産業</div>
            <div class="text-xs text-blue-600 mb-2">受電設備試験・検査実施</div>
            <div class="flex items-center space-x-2">
              <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs">実施中</span>
              <button class="px-2 py-1 bg-gray-600 text-white rounded text-xs hover:bg-gray-700">
                進捗更新
              </button>
            </div>
          </div>
          <div class="p-3 bg-purple-50 rounded">
            <div class="text-sm font-medium text-purple-800">2025-AU0127 MNO工場</div>
            <div class="text-xs text-purple-600 mb-2">制御システム試運転開始</div>
            <div class="flex items-center space-x-2">
              <span class="px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs">待機中</span>
              <button class="px-2 py-1 bg-purple-600 text-white rounded text-xs hover:bg-purple-700">
                開始
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- クイックアクション -->
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <h3 class="font-bold text-gray-800 mb-3">クイックアクション</h3>
        <div class="space-y-2">
          <button class="w-full px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 flex items-center justify-center">
            <i class="fas fa-plus mr-2"></i>進捗報告入力
          </button>
          <button class="w-full px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700 flex items-center justify-center">
            <i class="fas fa-route mr-2"></i>工程最適化
          </button>
          <button class="w-full px-3 py-2 bg-purple-600 text-white rounded text-sm hover:bg-purple-700 flex items-center justify-center">
            <i class="fas fa-calendar-alt mr-2"></i>スケジュール調整
          </button>
          <button class="w-full px-3 py-2 bg-orange-600 text-white rounded text-sm hover:bg-orange-700 flex items-center justify-center">
            <i class="fas fa-download mr-2"></i>工程表出力
          </button>
        </div>
        
        <div class="mt-4 pt-3 border-t border-gray-200">
          <h4 class="font-medium text-gray-700 text-sm mb-2">フィルター</h4>
          <div class="flex flex-wrap gap-1">
            <button class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs">電気</button>
            <button class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">空調</button>
            <button class="px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs">制御</button>
            <button class="px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs">計装</button>
          </div>
        </div>
      </div>
    </div>

    <!-- メインガントチャート -->
    <div class="bg-white rounded-lg shadow-md mb-6">
      <div class="p-4 border-b border-gray-200">
        <div class="flex items-center justify-between">
          <h3 class="font-bold text-gray-800 flex items-center">
            <i class="fas fa-chart-gantt mr-2"></i>
            プロジェクトガントチャート・工程管理
          </h3>
          <div class="flex space-x-2">
            <select class="px-3 py-1 border border-gray-300 rounded text-sm">
              <option>全プロジェクト</option>
              <option>進行中のみ</option>
              <option>遅延リスクのみ</option>
              <option>今月完工</option>
            </select>
            <button class="px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700">
              <i class="fas fa-expand-arrows-alt mr-1"></i>全画面
            </button>
            <button class="px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700">
              <i class="fas fa-save mr-1"></i>保存
            </button>
          </div>
        </div>
      </div>

      <div class="p-4 overflow-x-auto">
        <div class="min-w-full">
          <!-- タイムライン ヘッダー -->
          <div class="grid grid-cols-16 gap-1 mb-4 text-xs font-medium text-gray-600">
            <div class="col-span-3 text-left font-bold">プロジェクト / 工程</div>
            <div class="text-center border-l border-gray-300">5月</div>
            <div class="text-center">6月</div>
            <div class="text-center">7月</div>
            <div class="text-center">8月</div>
            <div class="text-center">9月</div>
            <div class="text-center">10月</div>
            <div class="text-center">11月</div>
            <div class="text-center">12月</div>
            <div class="text-center">1月</div>
            <div class="text-center">2月</div>
            <div class="text-center">3月</div>
            <div class="text-center">4月</div>
            <div class="text-center border-r border-gray-300">5月</div>
          </div>

          <!-- プロジェクト行 -->
          <div class="space-y-1">
            <!-- プロジェクト1: ABC工場省エネ設備（2025年4月開始→遅延中） -->
            <div class="grid grid-cols-16 gap-1 items-center border-l-4 border-red-400 pl-2">
              <div class="col-span-3 py-2">
                <div class="text-sm font-medium text-gray-800">2025-ME0123</div>
                <div class="text-xs text-gray-600">ABC工場省エネ設備</div>
                <div class="text-xs text-red-600">⚠️ 3日遅延</div>
                <div class="text-xs text-gray-500">担当: 田中修一</div>
              </div>
              
              <div class="col-span-1"></div>
              
              <!-- 設計工程（完了） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-blue-600 flex items-center justify-center text-white text-xs">
                  設計完了
                </div>
                <div class="text-xs text-center text-green-600 mt-1">100%</div>
              </div>
              
              <!-- 調達工程（ほぼ完了） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-green-600 flex items-center justify-center text-white text-xs">
                  調達完了
                </div>
                <div class="text-xs text-center text-green-600 mt-1">95%</div>
              </div>
              
              <!-- 電気工事（遅延中・クリティカルパス） -->
              <div class="col-span-2">
                <div class="gantt-bar bg-red-500 critical-path flex items-center justify-center text-white text-xs">
                  電気工事（遅延）
                </div>
                <div class="text-xs text-center text-red-600 mt-1">75%</div>
              </div>
              
              <!-- 空調工事（待機中） -->
              <div class="col-span-2">
                <div class="gantt-bar bg-gray-400 flex items-center justify-center text-white text-xs">
                  空調工事（待機）
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">0%</div>
              </div>
              
              <!-- 試運転・検査（予定） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-purple-300 flex items-center justify-center text-white text-xs milestone">
                  試運転
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <div class="col-span-5"></div>
            </div>

            <!-- プロジェクト2: DEF産業電気設備（2025年5月開始・順調） -->
            <div class="grid grid-cols-16 gap-1 items-center border-l-4 border-green-400 pl-2">
              <div class="col-span-3 py-2">
                <div class="text-sm font-medium text-gray-800">2025-EL0124</div>
                <div class="text-xs text-gray-600">DEF産業電気設備</div>
                <div class="text-xs text-green-600">✓ 予定通り</div>
                <div class="text-xs text-gray-500">担当: 高橋誠</div>
              </div>
              
              <div class="col-span-1"></div>
              
              <!-- 基本設計（完了） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-blue-600 flex items-center justify-center text-white text-xs">
                  基本設計
                </div>
                <div class="text-xs text-center text-green-600 mt-1">100%</div>
              </div>
              
              <!-- 詳細設計→調達（進行中） -->
              <div class="col-span-2">
                <div class="gantt-bar bg-indigo-500 flex items-center justify-center text-white text-xs">
                  詳細設計・調達
                </div>
                <div class="text-xs text-center text-blue-600 mt-1">80%</div>
              </div>
              
              <!-- 受電設備工事（予定） -->
              <div class="col-span-2">
                <div class="gantt-bar bg-yellow-500 flex items-center justify-center text-white text-xs">
                  受電設備工事
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <!-- 配線工事（予定） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-orange-500 flex items-center justify-center text-white text-xs">
                  配線工事
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <!-- 試運転・検査（予定） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-purple-500 flex items-center justify-center text-white text-xs milestone">
                  試運転
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <div class="col-span-5"></div>
            </div>

            <!-- プロジェクト3: GHI商事制御システム（2025年6月開始・納期注意） -->
            <div class="grid grid-cols-16 gap-1 items-center border-l-4 border-purple-400 pl-2">
              <div class="col-span-3 py-2">
                <div class="text-sm font-medium text-gray-800">2025-AU0125</div>
                <div class="text-xs text-gray-600">GHI商事制御システム</div>
                <div class="text-xs text-yellow-600">⚠ 納期注意</div>
                <div class="text-xs text-gray-500">担当: 鈴木花子</div>
              </div>
              
              <div class="col-span-2"></div>
              
              <!-- システム設計（完了） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-purple-600 flex items-center justify-center text-white text-xs">
                  設計完了
                </div>
                <div class="text-xs text-center text-green-600 mt-1">100%</div>
              </div>
              
              <!-- PLC製作・調達（進行中） -->
              <div class="col-span-2">
                <div class="gantt-bar bg-blue-600 flex items-center justify-center text-white text-xs">
                  PLC製作・調達
                </div>
                <div class="text-xs text-center text-blue-600 mt-1">85%</div>
              </div>
              
              <!-- 現地工事（一部開始） -->
              <div class="col-span-2">
                <div class="gantt-bar bg-orange-500 flex items-center justify-center text-white text-xs">
                  現地工事
                </div>
                <div class="text-xs text-center text-orange-600 mt-1">40%</div>
              </div>
              
              <!-- 制御調整・試運転（予定） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-red-400 flex items-center justify-center text-white text-xs milestone">
                  制御調整
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <div class="col-span-5"></div>
            </div>

            <!-- プロジェクト4: JKL工場空調更新（2025年5月開始・順調） -->
            <div class="grid grid-cols-16 gap-1 items-center border-l-4 border-blue-400 pl-2">
              <div class="col-span-3 py-2">
                <div class="text-sm font-medium text-gray-800">2025-ME0126</div>
                <div class="text-xs text-gray-600">JKL工場空調更新</div>
                <div class="text-xs text-green-600">✓ 予定通り</div>
                <div class="text-xs text-gray-500">担当: 佐藤健太</div>
              </div>
              
              <div class="col-span-1"></div>
              
              <!-- 現地調査・設計（完了） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-gray-600 flex items-center justify-center text-white text-xs">
                  調査・設計
                </div>
                <div class="text-xs text-center text-green-600 mt-1">完了</div>
              </div>
              
              <!-- 空調機調達（完了） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-green-600 flex items-center justify-center text-white text-xs">
                  機器調達
                </div>
                <div class="text-xs text-center text-green-600 mt-1">完了</div>
              </div>
              
              <!-- 搬入・設置工事（進行中） -->
              <div class="col-span-2">
                <div class="gantt-bar bg-orange-500 flex items-center justify-center text-white text-xs">
                  設置・配管工事
                </div>
                <div class="text-xs text-center text-orange-600 mt-1">80%</div>
              </div>
              
              <!-- 試運転（予定） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-purple-500 flex items-center justify-center text-white text-xs milestone">
                  試運転
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <div class="col-span-6"></div>
            </div>

            <!-- プロジェクト5: MNO工場太陽光PPA（2025年8月開始予定） -->
            <div class="grid grid-cols-16 gap-1 items-center border-l-4 border-yellow-400 pl-2">
              <div class="col-span-3 py-2">
                <div class="text-sm font-medium text-gray-800">2025-PP0130</div>
                <div class="text-xs text-gray-600">MNO工場太陽光PPA</div>
                <div class="text-xs text-blue-600">計画中</div>
                <div class="text-xs text-gray-500">担当: 高橋誠</div>
              </div>
              
              <div class="col-span-4"></div>
              
              <!-- 設計（予定） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-blue-300 flex items-center justify-center text-white text-xs">
                  設計
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <!-- 太陽光パネル調達（予定） -->
              <div class="col-span-2">
                <div class="gantt-bar bg-green-300 flex items-center justify-center text-white text-xs">
                  パネル調達
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <!-- 設置工事（予定） -->
              <div class="col-span-2">
                <div class="gantt-bar bg-orange-300 flex items-center justify-center text-white text-xs">
                  設置工事
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <!-- 系統連系・試運転（予定） -->
              <div class="col-span-1">
                <div class="gantt-bar bg-purple-300 flex items-center justify-center text-white text-xs milestone">
                  系統連系
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <div class="col-span-3"></div>
            </div>

            <!-- 未割当プロジェクト -->
            <div class="grid grid-cols-16 gap-1 items-center border-2 border-dashed border-orange-300 rounded bg-orange-50 pl-2">
              <div class="col-span-3 py-2">
                <div class="text-sm font-medium text-orange-800">2025-ME0135</div>
                <div class="text-xs text-orange-600">YZ工場空調改修 (未着手)</div>
                <div class="text-xs text-red-600">工程計画要作成</div>
              </div>
              <div class="col-span-13 flex items-center justify-center">
                <button class="px-4 py-2 bg-orange-600 text-white rounded text-sm hover:bg-orange-700">
                  <i class="fas fa-play mr-1"></i>工程計画開始
                </button>
              </div>
            </div>
          </div>
              
              <!-- 空調機搬入 -->
              <div class="col-span-1">
                <div class="gantt-bar bg-green-600 flex items-center justify-center text-white text-xs milestone">
                  搬入
                </div>
                <div class="text-xs text-center text-green-600 mt-1">完了</div>
              </div>
              
              <!-- 設置工事 -->
              <div class="col-span-2">
                <div class="gantt-bar bg-orange-500 flex items-center justify-center text-white text-xs">
                  設置工事
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">90%</div>
              </div>
              
              <!-- 配管工事 -->
              <div class="col-span-2">
                <div class="gantt-bar bg-cyan-500 flex items-center justify-center text-white text-xs">
                  配管工事
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">70%</div>
              </div>
              
              <!-- 試運転 -->
              <div class="col-span-2">
                <div class="gantt-bar bg-purple-500 flex items-center justify-center text-white text-xs">
                  試運転
                </div>
                <div class="text-xs text-center text-gray-500 mt-1">予定</div>
              </div>
              
              <div class="col-span-5"></div>
            </div>

            <!-- プロジェクト5: 未割当プロジェクト -->
            <div class="grid grid-cols-16 gap-1 items-center border-2 border-dashed border-orange-300 rounded bg-orange-50 pl-2">
              <div class="col-span-3 py-2">
                <div class="text-sm font-medium text-orange-800">2025-ME0135</div>
                <div class="text-xs text-orange-600">YZ工場空調改修 (未着手)</div>
                <div class="text-xs text-red-600">担当者未定</div>
              </div>
              <div class="col-span-13 flex items-center justify-center">
                <button class="px-4 py-2 bg-orange-600 text-white rounded text-sm hover:bg-orange-700">
                  <i class="fas fa-play mr-1"></i>工程計画開始
                </button>
              </div>
            </div>
          </div>

          <!-- 凡例 -->
          <div class="mt-6 p-4 bg-gray-50 rounded">
            <div class="flex items-center justify-between">
              <div class="flex items-center space-x-6">
                <div class="flex items-center">
                  <div class="w-4 h-4 bg-red-500 rounded mr-2"></div>
                  <span class="text-xs text-gray-600">遅延・クリティカルパス</span>
                </div>
                <div class="flex items-center">
                  <div class="w-4 h-4 bg-yellow-500 rounded mr-2"></div>
                  <span class="text-xs text-gray-600">実施中</span>
                </div>
                <div class="flex items-center">
                  <div class="w-4 h-4 bg-green-500 rounded mr-2"></div>
                  <span class="text-xs text-gray-600">完了</span>
                </div>
                <div class="flex items-center">
                  <div class="w-4 h-4 bg-gray-400 rounded mr-2"></div>
                  <span class="text-xs text-gray-600">予定</span>
                </div>
                <div class="flex items-center">
                  <span class="text-yellow-500 mr-2">◆</span>
                  <span class="text-xs text-gray-600">マイルストーン</span>
                </div>
              </div>
              
              <div class="text-xs text-gray-500">
                最終更新: 2025年6月2日 14:30
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 詳細情報パネル -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- 進捗詳細・リソース配分 -->
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <h3 class="font-bold text-gray-800 mb-4 flex items-center">
          <i class="fas fa-chart-bar text-blue-500 mr-2"></i>
          進捗詳細・リソース配分
        </h3>
        
        <div class="space-y-4">
          <!-- ABC工場詳細 -->
          <div class="border border-red-200 rounded p-3 bg-red-50">
            <div class="flex items-center justify-between mb-2">
              <div class="font-medium text-red-800">2025-ME0123 ABC工場省エネ設備</div>
              <button class="text-xs text-blue-600 hover:text-blue-800">詳細表示</button>
            </div>
            
            <div class="grid grid-cols-3 gap-3 mb-3">
              <div>
                <div class="text-xs text-gray-600 mb-1">全体進捗</div>
                <div class="progress-bar">
                  <div class="h-full bg-red-500 rounded" style="width: 75%"></div>
                </div>
                <div class="text-xs text-red-600 mt-1">75% (3日遅延)</div>
              </div>
              <div>
                <div class="text-xs text-gray-600 mb-1">電気工事</div>
                <div class="progress-bar">
                  <div class="h-full bg-orange-500 rounded" style="width: 60%"></div>
                </div>
                <div class="text-xs text-orange-600 mt-1">60% (遅延中)</div>
              </div>
              <div>
                <div class="text-xs text-gray-600 mb-1">空調工事</div>
                <div class="progress-bar">
                  <div class="h-full bg-gray-300 rounded" style="width: 0%"></div>
                </div>
                <div class="text-xs text-gray-500 mt-1">0% (待機中)</div>
              </div>
            </div>
            
            <div class="text-xs text-gray-600">
              <strong>配置人員:</strong> 田中修一(主)、佐藤健太(サポート)<br>
              <strong>次回検討事項:</strong> 電気工事工程見直し、空調工事開始判断
            </div>
          </div>

          <!-- DEF産業詳細 -->
          <div class="border border-green-200 rounded p-3 bg-green-50">
            <div class="flex items-center justify-between mb-2">
              <div class="font-medium text-green-800">2025-EL0124 DEF産業電気設備</div>
              <button class="text-xs text-blue-600 hover:text-blue-800">詳細表示</button>
            </div>
            
            <div class="grid grid-cols-3 gap-3 mb-3">
              <div>
                <div class="text-xs text-gray-600 mb-1">全体進捗</div>
                <div class="progress-bar">
                  <div class="h-full bg-green-500 rounded" style="width: 85%"></div>
                </div>
                <div class="text-xs text-green-600 mt-1">85% (予定通り)</div>
              </div>
              <div>
                <div class="text-xs text-gray-600 mb-1">受電設備</div>
                <div class="progress-bar">
                  <div class="h-full bg-blue-500 rounded" style="width: 80%"></div>
                </div>
                <div class="text-xs text-blue-600 mt-1">80% (実施中)</div>
              </div>
              <div>
                <div class="text-xs text-gray-600 mb-1">配線工事</div>
                <div class="progress-bar">
                  <div class="h-full bg-yellow-500 rounded" style="width: 60%"></div>
                </div>
                <div class="text-xs text-yellow-600 mt-1">60% (実施中)</div>
              </div>
            </div>
            
            <div class="text-xs text-gray-600">
              <strong>配置人員:</strong> 高橋誠(主)、外注2名<br>
              <strong>今日のマイルストーン:</strong> 受電設備試験完了予定
            </div>
          </div>

          <!-- GHI商事詳細 -->
          <div class="border border-purple-200 rounded p-3 bg-purple-50">
            <div class="flex items-center justify-between mb-2">
              <div class="font-medium text-purple-800">2025-AU0125 GHI商事制御システム</div>
              <button class="text-xs text-blue-600 hover:text-blue-800">詳細表示</button>
            </div>
            
            <div class="grid grid-cols-3 gap-3 mb-3">
              <div>
                <div class="text-xs text-gray-600 mb-1">全体進捗</div>
                <div class="progress-bar">
                  <div class="h-full bg-purple-500 rounded" style="width: 70%"></div>
                </div>
                <div class="text-xs text-purple-600 mt-1">70% (注意)</div>
              </div>
              <div>
                <div class="text-xs text-gray-600 mb-1">PLC製作</div>
                <div class="progress-bar">
                  <div class="h-full bg-blue-500 rounded" style="width: 85%"></div>
                </div>
                <div class="text-xs text-blue-600 mt-1">85% (実施中)</div>
              </div>
              <div>
                <div class="text-xs text-gray-600 mb-1">現地工事</div>
                <div class="progress-bar">
                  <div class="h-full bg-orange-500 rounded" style="width: 40%"></div>
                </div>
                <div class="text-xs text-orange-600 mt-1">40% (実施中)</div>
              </div>
            </div>
            
            <div class="text-xs text-gray-600">
              <strong>配置人員:</strong> 鈴木花子(主)、制御協力会社1名<br>
              <strong>懸案事項:</strong> 制御機器の一部納期遅延の可能性
            </div>
          </div>
        </div>
      </div>

      <!-- 活動履歴・連携情報 -->
      <div class="bg-white rounded-lg shadow-md p-4 card-hover">
        <h3 class="font-bold text-gray-800 mb-4 flex items-center">
          <i class="fas fa-history text-green-500 mr-2"></i>
          最近の活動履歴・部門間連携
        </h3>
        
        <div class="space-y-3">
          <div class="border-l-4 border-blue-400 pl-3 py-2">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-sm font-medium text-gray-800">進捗報告更新</div>
                <div class="text-xs text-gray-600">2025-ME0123: 電気工事進捗75%に更新</div>
                <div class="text-xs text-gray-500">田中修一 • 2時間前</div>
              </div>
              <button class="text-xs text-blue-600 hover:text-blue-800">詳細</button>
            </div>
          </div>
          
          <div class="border-l-4 border-green-400 pl-3 py-2">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-sm font-medium text-gray-800">マイルストーン完了</div>
                <div class="text-xs text-gray-600">2025-ME0126: 空調機搬入・設置完了</div>
                <div class="text-xs text-gray-500">佐藤健太 • 4時間前</div>
              </div>
              <button class="text-xs text-blue-600 hover:text-blue-800">詳細</button>
            </div>
          </div>
          
          <div class="border-l-4 border-purple-400 pl-3 py-2">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-sm font-medium text-gray-800">営業部門から連携</div>
                <div class="text-xs text-gray-600">2025-AU0125: 顧客から追加要望受領</div>
                <div class="text-xs text-gray-500">営業部・山田 • 6時間前</div>
              </div>
              <button class="text-xs text-blue-600 hover:text-blue-800">確認</button>
            </div>
          </div>
          
          <div class="border-l-4 border-orange-400 pl-3 py-2">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-sm font-medium text-gray-800">発注管理連携</div>
                <div class="text-xs text-gray-600">制御機器発注: 納期回答待ち</div>
                <div class="text-xs text-gray-500">発注管理 • 1日前</div>
              </div>
              <button class="text-xs text-blue-600 hover:text-blue-800">確認</button>
            </div>
          </div>
          
          <div class="border-l-4 border-yellow-400 pl-3 py-2">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-sm font-medium text-gray-800">検査予定調整</div>
                <div class="text-xs text-gray-600">2025-EL0124: 電気主任技術者検査調整</div>
                <div class="text-xs text-gray-500">カスタマー部 • 1日前</div>
              </div>
              <button class="text-xs text-blue-600 hover:text-blue-800">対応</button>
            </div>
          </div>
          
          <div class="border-l-4 border-red-400 pl-3 py-2">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-sm font-medium text-gray-800">遅延アラート発生</div>
                <div class="text-xs text-gray-600">2025-ME0123: クリティカルパス遅延検知</div>
                <div class="text-xs text-gray-500">システム自動 • 2日前</div>
              </div>
              <button class="text-xs text-red-600 hover:text-red-800">対応済</button>
            </div>
          </div>
        </div>
        
        <div class="mt-4 pt-3 border-t border-gray-200">
          <button class="w-full px-3 py-2 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200">
            <i class="fas fa-history mr-2"></i>すべての履歴を表示
          </button>
        </div>
      </div>
    </div>

    <!-- クリティカルパス分析・リスク管理 -->
    <div class="bg-white rounded-lg shadow-md mt-6 p-4">
      <h3 class="font-bold text-gray-800 mb-4 flex items-center">
        <i class="fas fa-route text-red-500 mr-2"></i>
        クリティカルパス分析・リスク管理
      </h3>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- クリティカルパス -->
        <div>
          <h4 class="font-medium text-gray-700 mb-3">現在のクリティカルパス</h4>
          <div class="space-y-2">
            <div class="p-3 bg-red-50 border border-red-200 rounded">
              <div class="font-medium text-red-800">2025-ME0123 ABC工場</div>
              <div class="text-sm text-red-600 mb-2">電気工事 → 空調工事 → 試運転</div>
              <div class="text-xs text-gray-600">
                <strong>影響:</strong> 3日遅延により全体工期に直結<br>
                <strong>対策:</strong> 電気工事の人員増強、空調工事との並行作業検討
              </div>
            </div>
            
            <div class="p-3 bg-yellow-50 border border-yellow-200 rounded">
              <div class="font-medium text-yellow-800">2025-AU0125 GHI商事</div>
              <div class="text-sm text-yellow-600 mb-2">制御機器調達 → 現地工事 → 制御調整</div>
              <div class="text-xs text-gray-600">
                <strong>リスク:</strong> 制御機器納期遅延の可能性<br>
                <strong>対策:</strong> 代替品検討、工程順序の見直し
              </div>
            </div>
          </div>
        </div>
        
        <!-- リスク一覧 -->
        <div>
          <h4 class="font-medium text-gray-700 mb-3">リスク一覧・対策状況</h4>
          <div class="space-y-2">
            <div class="p-3 bg-red-50 border border-red-200 rounded">
              <div class="flex items-center justify-between mb-1">
                <div class="font-medium text-red-800">人員不足リスク</div>
                <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-xs">高</span>
              </div>
              <div class="text-xs text-gray-600 mb-2">
                電気工事の遅延により他工程への人員配置に影響
              </div>
              <div class="flex space-x-2">
                <button class="px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700">
                  対策実行
                </button>
                <button class="px-2 py-1 bg-gray-600 text-white rounded text-xs hover:bg-gray-700">
                  詳細確認
                </button>
              </div>
            </div>
            
            <div class="p-3 bg-yellow-50 border border-yellow-200 rounded">
              <div class="flex items-center justify-between mb-1">
                <div class="font-medium text-yellow-800">納期遅延リスク</div>
                <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs">中</span>
              </div>
              <div class="text-xs text-gray-600 mb-2">
                制御機器の一部で納期回答待ち、工程への影響可能性
              </div>
              <div class="flex space-x-2">
                <button class="px-2 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700">
                  代替品検討
                </button>
                <button class="px-2 py-1 bg-gray-600 text-white rounded text-xs hover:bg-gray-700">
                  進捗確認
                </button>
              </div>
            </div>
            
            <div class="p-3 bg-blue-50 border border-blue-200 rounded">
              <div class="flex items-center justify-between mb-1">
                <div class="font-medium text-blue-800">品質管理リスク</div>
                <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs">低</span>
              </div>
              <div class="text-xs text-gray-600 mb-2">
                複数工事の並行実施による品質管理の複雑化
              </div>
              <div class="flex space-x-2">
                <button class="px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700">
                  管理強化
                </button>
                <button class="px-2 py-1 bg-gray-600 text-white rounded text-xs hover:bg-gray-700">
                  点検頻度増
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- フローティングヘルプボタン -->
  <div class="fixed bottom-6 right-6">
    <button class="w-14 h-14 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg flex items-center justify-center text-xl transition-all duration-300 hover:scale-110">
      <i class="fas fa-question"></i>
    </button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 進捗報告入力ボタン
      const progressButton = document.querySelector('button');
      if (progressButton && progressButton.textContent.includes('進捗報告入力')) {
        progressButton.addEventListener('click', function() {
          showNotification('進捗報告入力画面を開いています...', 'info');
          
          // モーダル風の進捗入力をシミュレート
          setTimeout(() => {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
              <div class="bg-white rounded-lg p-6 w-96">
                <h3 class="font-bold text-gray-800 mb-4">進捗報告入力</h3>
                <div class="space-y-3">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">プロジェクト</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded">
                      <option>2025-ME0123 ABC工場省エネ設備</option>
                      <option>2025-EL0124 DEF産業電気設備</option>
                      <option>2025-AU0125 GHI商事制御システム</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">進捗率</label>
                    <input type="range" min="0" max="100" value="75" class="w-full">
                    <div class="text-center text-sm text-gray-600">75%</div>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">作業内容</label>
                    <textarea class="w-full px-3 py-2 border border-gray-300 rounded" rows="3" placeholder="本日の作業内容を入力..."></textarea>
                  </div>
                  <div class="flex space-x-3">
                    <button class="flex-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                      報告登録
                    </button>
                    <button class="flex-1 px-3 py-2 bg-gray-600 text-white rounded hover:bg-gray-700" onclick="this.closest('.fixed').remove()">
                      キャンセル
                    </button>
                  </div>
                </div>
              </div>
            `;
            document.body.appendChild(modal);
          }, 500);
        });
      }

      // 工程最適化ボタン
      const optimizeButtons = document.querySelectorAll('button');
      optimizeButtons.forEach(button => {
        if (button.textContent.includes('工程最適化')) {
          button.addEventListener('click', function() {
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>最適化実行中...';
            this.disabled = true;
            
            setTimeout(() => {
              this.innerHTML = '<i class="fas fa-route mr-2"></i>工程最適化';
              this.disabled = false;
              showNotification('工程最適化が完了しました。3件の調整提案があります。', 'success');
              
              // 進捗バーの更新シミュレーション
              const progressBars = document.querySelectorAll('.progress-bar div');
              progressBars.forEach(bar => {
                const currentWidth = parseInt(bar.style.width);
                if (currentWidth < 90) {
                  bar.style.width = `${Math.min(100, currentWidth + 5)}%`;
                }
              });
            }, 3000);
          });
        }
      });

      // ガントチャートバーのクリックイベント
      const ganttBars = document.querySelectorAll('.gantt-bar');
      ganttBars.forEach(bar => {
        bar.addEventListener('click', function() {
          const taskName = this.textContent.trim();
          const projectRow = this.closest('.grid');
          const projectInfo = projectRow.querySelector('.text-sm.font-medium').textContent;
          showNotification(`${projectInfo} - ${taskName}の詳細を表示しています...`, 'info');
        });
        
        bar.addEventListener('mouseenter', function() {
          this.style.transform = 'scaleY(1.1)';
          this.style.zIndex = '10';
        });
        
        bar.addEventListener('mouseleave', function() {
          this.style.transform = 'scaleY(1)';
          this.style.zIndex = '1';
        });
      });

      // アラート対応ボタン
      const alertButtons = document.querySelectorAll('button');
      alertButtons.forEach(button => {
        if (button.textContent.includes('対応') || button.textContent.includes('確認') || button.textContent.includes('調整')) {
          button.addEventListener('click', function() {
            const alertContent = this.closest('.p-3').querySelector('.text-sm').textContent;
            showNotification(`${alertContent}の対応画面を開いています...`, 'info');
          });
        }
      });

      // マイルストーンボタン
      const milestoneButtons = document.querySelectorAll('button');
      milestoneButtons.forEach(button => {
        if (button.textContent.includes('次工程開始') || button.textContent.includes('進捗更新') || button.textContent.includes('開始')) {
          button.addEventListener('click', function() {
            const action = this.textContent.trim();
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i>処理中...';
            this.disabled = true;
            
            setTimeout(() => {
              this.innerHTML = '<i class="fas fa-check mr-1"></i>完了';
              this.className = 'px-2 py-1 bg-green-600 text-white rounded text-xs';
              showNotification(`${action}が完了しました`, 'success');
            }, 1500);
          });
        }
      });

      // 詳細表示ボタン
      const detailButtons = document.querySelectorAll('button');
      detailButtons.forEach(button => {
        if (button.textContent.includes('詳細表示') || button.textContent.includes('詳細')) {
          button.addEventListener('click', function() {
            const projectName = this.closest('.border').querySelector('.font-medium').textContent;
            showNotification(`${projectName}の詳細情報を読み込んでいます...`, 'info');
          });
        }
      });

      // リスク対策ボタン
      const riskButtons = document.querySelectorAll('button');
      riskButtons.forEach(button => {
        if (button.textContent.includes('対策実行') || button.textContent.includes('代替品検討') || button.textContent.includes('管理強化')) {
          button.addEventListener('click', function() {
            const riskType = this.closest('.p-3').querySelector('.font-medium').textContent;
            const action = this.textContent.trim();
            showNotification(`${riskType}: ${action}を開始しました`, 'success');
          });
        }
      });

      // フィルターボタンの切り替え
      const filterButtons = document.querySelectorAll('.px-2.py-1');
      filterButtons.forEach(button => {
        if (button.textContent.includes('電気') || button.textContent.includes('空調') || 
            button.textContent.includes('制御') || button.textContent.includes('計装')) {
          button.addEventListener('click', function() {
            this.classList.toggle('bg-blue-600');
            this.classList.toggle('text-white');
            this.classList.toggle('bg-blue-100');
            this.classList.toggle('text-blue-800');
            
            const skill = this.textContent.trim();
            showNotification(`工種「${skill}」でフィルタリングしました`, 'info');
          });
        }
      });

      // スケジュール調整ボタン
      const scheduleButtons = document.querySelectorAll('button');
      scheduleButtons.forEach(button => {
        if (button.textContent.includes('スケジュール調整')) {
          button.addEventListener('click', function() {
            showNotification('スケジュール調整画面を開いています...', 'info');
            
            // スケジュール調整モーダルのシミュレーション
            setTimeout(() => {
              const modal = document.createElement('div');
              modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
              modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-1/2">
                  <h3 class="font-bold text-gray-800 mb-4">スケジュール調整</h3>
                  <div class="space-y-4">
                    <div class="p-3 border border-gray-200 rounded">
                      <div class="font-medium text-gray-800 mb-2">2025-ME0123 ABC工場</div>
                      <div class="grid grid-cols-2 gap-4">
                        <div>
                          <label class="text-sm text-gray-600">電気工事完了予定</label>
                          <input type="date" value="2025-06-25" class="w-full px-2 py-1 border rounded text-sm">
                        </div>
                        <div>
                          <label class="text-sm text-gray-600">空調工事開始予定</label>
                          <input type="date" value="2025-06-26" class="w-full px-2 py-1 border rounded text-sm">
                        </div>
                      </div>
                    </div>
                    <div class="p-3 border border-gray-200 rounded">
                      <div class="font-medium text-gray-800 mb-2">2025-AU0125 GHI商事</div>
                      <div class="grid grid-cols-2 gap-4">
                        <div>
                          <label class="text-sm text-gray-600">制御調整開始</label>
                          <input type="date" value="2025-07-15" class="w-full px-2 py-1 border rounded text-sm">
                        </div>
                        <div>
                          <label class="text-sm text-gray-600">完工予定</label>
                          <input type="date" value="2025-07-31" class="w-full px-2 py-1 border rounded text-sm">
                        </div>
                      </div>
                    </div>
                    <div class="flex space-x-3">
                      <button class="flex-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                        スケジュール更新
                      </button>
                      <button class="flex-1 px-3 py-2 bg-gray-600 text-white rounded hover:bg-gray-700" onclick="this.closest('.fixed').remove()">
                        キャンセル
                      </button>
                    </div>
                  </div>
                </div>
              `;
              document.body.appendChild(modal);
            }, 500);
          });
        }
      });

      // 工程表出力ボタン
      const reportButtons = document.querySelectorAll('button');
      reportButtons.forEach(button => {
        if (button.textContent.includes('工程表出力')) {
          button.addEventListener('click', function() {
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>出力中...';
            this.disabled = true;
            
            setTimeout(() => {
              this.innerHTML = '<i class="fas fa-download mr-2"></i>工程表出力';
              this.disabled = false;
              showNotification('工程表PDFのダウンロードが開始されました', 'success');
            }, 2000);
          });
        }
      });

      // 工程計画開始ボタン
      const planButtons = document.querySelectorAll('button');
      planButtons.forEach(button => {
        if (button.textContent.includes('工程計画開始')) {
          button.addEventListener('click', function() {
            showNotification('工程計画作成ウィザードを開始します...', 'info');
            
            setTimeout(() => {
              const modal = document.createElement('div');
              modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
              modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 w-2/3">
                  <h3 class="font-bold text-gray-800 mb-4">工程計画作成 - 2025-ME0135 YZ工場空調改修</h3>
                  <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                      <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">工事開始予定日</label>
                        <input type="date" value="2025-07-01" class="w-full px-3 py-2 border border-gray-300 rounded">
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">工事完了予定日</label>
                        <input type="date" value="2025-08-15" class="w-full px-3 py-2 border border-gray-300 rounded">
                      </div>
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">主担当者</label>
                      <select class="w-full px-3 py-2 border border-gray-300 rounded">
                        <option value="">担当者を選択</option>
                        <option>田中修一 (電気・制御)</option>
                        <option>佐藤健太 (空調・配管)</option>
                        <option>高橋誠 (省エネ・設計)</option>
                        <option>鈴木花子 (制御・PLC)</option>
                      </select>
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-1">工事内容</label>
                      <div class="grid grid-cols-3 gap-2">
                        <label class="flex items-center">
                          <input type="checkbox" checked class="mr-2">
                          <span class="text-sm">空調設備更新</span>
                        </label>
                        <label class="flex items-center">
                          <input type="checkbox" class="mr-2">
                          <span class="text-sm">配管工事</span>
                        </label>
                        <label class="flex items-center">
                          <input type="checkbox" checked class="mr-2">
                          <span class="text-sm">制御システム</span>
                        </label>
                        <label class="flex items-center">
                          <input type="checkbox" class="mr-2">
                          <span class="text-sm">電気工事</span>
                        </label>
                        <label class="flex items-center">
                          <input type="checkbox" class="mr-2">
                          <span class="text-sm">計装工事</span>
                        </label>
                        <label class="flex items-center">
                          <input type="checkbox" checked class="mr-2">
                          <span class="text-sm">試運転</span>
                        </label>
                      </div>
                    </div>
                    <div class="flex space-x-3">
                      <button class="flex-1 px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                        工程計画作成
                      </button>
                      <button class="flex-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                        テンプレート使用
                      </button>
                      <button class="flex-1 px-3 py-2 bg-gray-600 text-white rounded hover:bg-gray-700" onclick="this.closest('.fixed').remove()">
                        キャンセル
                      </button>
                    </div>
                  </div>
                </div>
              `;
              document.body.appendChild(modal);
            }, 500);
          });
        }
      });

      // 保存ボタン
      const saveButtons = document.querySelectorAll('button');
      saveButtons.forEach(button => {
        if (button.textContent.includes('保存')) {
          button.addEventListener('click', function() {
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i>保存中...';
            this.disabled = true;
            
            setTimeout(() => {
              this.innerHTML = '<i class="fas fa-save mr-1"></i>保存';
              this.disabled = false;
              showNotification('工程情報を保存しました', 'success');
            }, 1500);
          });
        }
      });

      // プロジェクト選択の変更
      const projectSelects = document.querySelectorAll('select');
      projectSelects.forEach(select => {
        if (select.querySelector('option')?.textContent.includes('全プロジェクト')) {
          select.addEventListener('change', function() {
            const selectedOption = this.value;
            showNotification(`表示フィルター「${this.options[this.selectedIndex].text}」を適用しました`, 'info');
            
            // ガントチャートの表示更新シミュレーション
            setTimeout(() => {
              showNotification('ガントチャート表示を更新しました', 'success');
            }, 1000);
          });
        }
      });

      // 全画面ボタン
      const fullscreenButtons = document.querySelectorAll('button');
      fullscreenButtons.forEach(button => {
        if (button.textContent.includes('全画面')) {
          button.addEventListener('click', function() {
            showNotification('ガントチャートを全画面表示しています...', 'info');
            
            // 全画面表示のシミュレーション
            const ganttChart = document.querySelector('.bg-white.rounded-lg.shadow-md.mb-6');
            if (ganttChart) {
              ganttChart.style.position = 'fixed';
              ganttChart.style.top = '0';
              ganttChart.style.left = '0';
              ganttChart.style.right = '0';
              ganttChart.style.bottom = '0';
              ganttChart.style.zIndex = '100';
              ganttChart.style.backgroundColor = 'white';
              
              // 閉じるボタンを追加
              const closeButton = document.createElement('button');
              closeButton.innerHTML = '<i class="fas fa-times"></i> 閉じる';
              closeButton.className = 'absolute top-4 right-4 px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700';
              closeButton.onclick = function() {
                ganttChart.style.position = '';
                ganttChart.style.top = '';
                ganttChart.style.left = '';
                ganttChart.style.right = '';
                ganttChart.style.bottom = '';
                ganttChart.style.zIndex = '';
                this.remove();
              };
              ganttChart.appendChild(closeButton);
            }
          });
        }
      });

      // 履歴表示ボタン
      const historyButtons = document.querySelectorAll('button');
      historyButtons.forEach(button => {
        if (button.textContent.includes('すべての履歴')) {
          button.addEventListener('click', function() {
            showNotification('活動履歴一覧を表示しています...', 'info');
          });
        }
      });

      // フローティングヘルプボタン
      const helpButton = document.querySelector('.fixed.bottom-6.right-6 button');
      if (helpButton) {
        helpButton.addEventListener('click', function() {
          const helpContent = `
            <div class="text-left">
              <h4 class="font-bold mb-2">工程管理システム機能説明</h4>
              <ul class="text-sm space-y-1">
                <li>• ガントチャートでプロジェクト全体を視覚的に管理</li>
                <li>• クリティカルパスの自動検知と遅延アラート</li>
                <li>• リアルタイム進捗更新と部門間連携</li>
                <li>• マイルストーン管理と自動通知</li>
                <li>• リスク分析と対策管理機能</li>
                <li>• 工程最適化の自動提案</li>
              </ul>
            </div>
          `;
          showNotification(helpContent, 'info', 5000);
        });
      }

      // リアルタイム進捗更新シミュレーション
      function updateProgressRealTime() {
        const progressBars = document.querySelectorAll('.progress-bar div');
        progressBars.forEach(bar => {
          const currentWidth = parseInt(bar.style.width);
          if (currentWidth < 100 && Math.random() > 0.8) {
            // 20%の確率で進捗を1%更新
            const newWidth = Math.min(100, currentWidth + 1);
            bar.style.width = `${newWidth}%`;
            
            // 進捗テキストも更新
            const progressText = bar.parentElement.nextElementSibling;
            if (progressText && progressText.textContent.includes('%')) {
              progressText.textContent = progressText.textContent.replace(/\d+%/, `${newWidth}%`);
            }
          }
        });
      }

      // 15秒ごとに進捗を更新
      setInterval(updateProgressRealTime, 15000);

      // リアルタイム通知のシミュレーション（45秒ごと）
      function simulateRealTimeUpdates() {
        const notifications = [
          { message: '2025-EL0124: 受電設備試験が完了しました', type: 'success' },
          { message: '2025-ME0126: 配管工事の進捗が80%に更新されました', type: 'info' },
          { message: '2025-AU0125: 制御機器の納期回答を受領しました', type: 'info' },
          { message: '新規マイルストーンが追加されました', type: 'info' },
          { message: 'クリティカルパスの見直しが必要です', type: 'warning' }
        ];
        
        let notificationIndex = 0;
        setInterval(() => {
          const notification = notifications[notificationIndex % notifications.length];
          showNotification(notification.message, notification.type);
          notificationIndex++;
        }, 45000);
      }

      // リアルタイム更新の開始
      simulateRealTimeUpdates();

      // 画面読み込み完了通知
      setTimeout(() => {
        showNotification('工程管理システムが準備完了しました', 'success');
      }, 1000);
    });

    // 通知表示関数
    function showNotification(message, type = 'info', duration = 3000) {
      const notification = document.createElement('div');
      const bgColor = {
        'success': 'bg-green-500',
        'warning': 'bg-yellow-500',
        'error': 'bg-red-500',
        'info': 'bg-blue-500'
      }[type] || 'bg-blue-500';
      
      const icon = {
        'success': 'fas fa-check',
        'warning': 'fas fa-exclamation-triangle',
        'error': 'fas fa-times',
        'info': 'fas fa-info-circle'
      }[type] || 'fas fa-info-circle';
      
      notification.className = `fixed top-4 right-4 ${bgColor} text-white px-4 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 max-w-md`;
      notification.innerHTML = `<i class="${icon} mr-2"></i><span>${message}</span>`;
      notification.style.transform = 'translateX(100%)';
      
      document.body.appendChild(notification);
      
      // アニメーション
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // 自動削除
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, duration);
    }

    // ページ読み込み時のアニメーション
    window.addEventListener('load', function() {
      const cards = document.querySelectorAll('.card-hover, .border');
      cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
          card.style.transition = 'all 0.5s ease';
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, index * 100);
      });
    });
  </script>
</body>
</html>