<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>発注承認システム - エネルギーサービス企業</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px -3px rgba(0, 0, 0, 0.15);
    }
    .card-hover {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .approval-flow {
      position: relative;
      display: flex;
      align-items: center;
      padding: 0.5rem 0;
    }
    .approval-flow::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(to right, #10b981, #3b82f6);
      z-index: 1;
    }
    .approval-step {
      position: relative;
      z-index: 2;
      background: white;
      padding: 0.5rem;
      border-radius: 50%;
      border: 3px solid #10b981;
      min-width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .approval-step.pending {
      border-color: #f59e0b;
      background: #fef3c7;
    }
    .approval-step.completed {
      border-color: #10b981;
      background: #d1fae5;
    }
    .approval-step.current {
      border-color: #3b82f6;
      background: #dbeafe;
      animation: pulse 2s infinite;
    }
    .risk-indicator {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: white;
      font-weight: bold;
    }
    .risk-high { background: #ef4444; }
    .risk-medium { background: #f59e0b; }
    .risk-low { background: #10b981; }
    .copilot-suggestion {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px;
      padding: 1rem;
      color: white;
      margin: 1rem 0;
    }
    .price-comparison {
      background: linear-gradient(45deg, #f3f4f6, #ffffff);
      border: 1px solid #e5e7eb;
      border-radius: 8px;
    }
    .vendor-rating {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    .star-rating {
      color: #fbbf24;
    }
    .timeline-item {
      position: relative;
      padding-left: 2rem;
      margin-bottom: 1rem;
    }
    .timeline-item::before {
      content: '';
      position: absolute;
      left: 0.5rem;
      top: 0.5rem;
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 50%;
      background: #3b82f6;
    }
    .timeline-item::after {
      content: '';
      position: absolute;
      left: 0.75rem;
      top: 1rem;
      width: 1px;
      height: calc(100% + 0.5rem);
      background: #e5e7eb;
    }
    .timeline-item:last-child::after {
      display: none;
    }
    .attachment-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 0.75rem;
    }
    .file-preview {
      border: 2px dashed #d1d5db;
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      transition: all 0.2s;
    }
    .file-preview:hover {
      border-color: #3b82f6;
      background-color: #f8fafc;
    }
    .budget-gauge {
      position: relative;
      width: 120px;
      height: 120px;
      margin: 0 auto;
    }
    .gauge-bg {
      stroke: #e5e7eb;
      stroke-width: 8;
      fill: none;
    }
    .gauge-fill {
      stroke: #10b981;
      stroke-width: 8;
      fill: none;
      stroke-linecap: round;
      transition: stroke-dasharray 0.5s ease;
    }
    .gauge-fill.over-budget {
      stroke: #ef4444;
    }
    .impact-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-100 to-blue-50 min-h-screen">
  <!-- ヘッダーセクション -->
  <header class="bg-gradient-to-r from-blue-800 to-indigo-900 text-white shadow-xl">
    <div class="container mx-auto px-4 py-4">
      <div class="flex justify-between items-center">
        <div class="flex items-center">
          <div class="flex items-center mr-6">
            <i class="fas fa-shopping-cart text-2xl mr-3"></i>
            <div>
              <h1 class="text-2xl font-bold">発注承認システム</h1>
              <p class="text-blue-200 text-sm">Purchase Order Approval System</p>
            </div>
          </div>
          <div class="flex items-center space-x-4">
            <span class="bg-blue-700 px-3 py-1 rounded-full text-sm font-medium">技術部門専用</span>
            <div class="text-center">
              <div class="text-xs text-blue-200">承認効率化率</div>
              <div class="text-lg font-bold text-white">87%</div>
            </div>
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <!-- 通知 -->
          <div class="relative">
            <button class="p-2 hover:bg-blue-700 rounded-full transition-colors">
              <i class="fas fa-bell text-xl"></i>
              <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center">5</span>
            </button>
          </div>
          <!-- ユーザー情報 -->
          <div class="flex items-center space-x-3">
            <div class="text-right">
              <div class="font-semibold">田中 修一</div>
              <div class="text-sm text-blue-200">技術部長</div>
            </div>
            <div class="w-12 h-12 bg-gradient-to-br from-white to-gray-200 text-blue-800 rounded-full flex items-center justify-center font-bold text-lg">
              TK
            </div>
          </div>
          <button class="text-blue-200 hover:text-white text-sm">
            <i class="fas fa-cog mr-1"></i>設定
          </button>
        </div>
      </div>
    </div>
  </header>

  <div class="container mx-auto px-4 py-6">
    <!-- パンくずナビゲーション -->
    <nav class="flex items-center space-x-2 text-sm text-gray-600 mb-6">
      <a href="#" class="hover:text-blue-600 transition-colors flex items-center">
        <i class="fas fa-home mr-1"></i>
        ホーム
      </a>
      <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
      <a href="#" class="hover:text-blue-600 transition-colors">技術部門HUB</a>
      <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
      <a href="#" class="hover:text-blue-600 transition-colors">発注管理</a>
      <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
      <span class="text-gray-800 font-semibold">発注承認</span>
      <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
      <span class="text-blue-600 font-semibold">PO-2025-0045</span>
    </nav>

    <!-- 発注概要カード -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6 card-hover">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center space-x-4">
          <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center">
            <i class="fas fa-industry text-white text-2xl"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-800">空調機器発注承認</h2>
            <div class="flex items-center space-x-4 text-sm text-gray-600 mt-2">
              <span class="flex items-center"><i class="fas fa-hashtag mr-1 text-blue-500"></i>PO-2025-0045</span>
              <span class="flex items-center"><i class="fas fa-calendar mr-1 text-green-500"></i>2025/05/20</span>
              <span class="flex items-center"><i class="fas fa-user mr-1 text-purple-500"></i>佐藤健太</span>
              <span class="flex items-center"><i class="fas fa-building mr-1 text-orange-500"></i>ABC工場案件</span>
            </div>
          </div>
        </div>
        <div class="flex items-center space-x-3">
          <div class="text-right">
            <div class="text-3xl font-bold text-blue-600">¥58,080,000</div>
            <div class="text-sm text-gray-500">税込総額</div>
          </div>
          <div class="relative">
            <div class="w-3 h-3 bg-yellow-500 rounded-full animate-pulse"></div>
            <div class="risk-indicator risk-medium">!</div>
          </div>
        </div>
      </div>

      <!-- 承認フロー -->
      <div class="bg-gray-50 rounded-xl p-4 mb-4">
        <h3 class="font-bold text-gray-800 mb-4 flex items-center">
          <i class="fas fa-route text-blue-600 mr-2"></i>
          承認ワークフロー
        </h3>
        <div class="approval-flow">
          <div class="flex-1 flex justify-between items-center">
            <div class="text-center">
              <div class="approval-step completed">
                <i class="fas fa-user text-green-600"></i>
              </div>
              <div class="mt-2 text-xs font-medium">申請者</div>
              <div class="text-xs text-gray-500">佐藤健太</div>
              <div class="text-xs text-green-600">完了</div>
            </div>
            <div class="text-center">
              <div class="approval-step current">
                <i class="fas fa-user-tie text-blue-600"></i>
              </div>
              <div class="mt-2 text-xs font-medium">技術部長</div>
              <div class="text-xs text-gray-500">田中修一</div>
              <div class="text-xs text-blue-600">承認待ち</div>
            </div>
            <div class="text-center">
              <div class="approval-step pending">
                <i class="fas fa-user-cog text-yellow-600"></i>
              </div>
              <div class="mt-2 text-xs font-medium">経理部長</div>
              <div class="text-xs text-gray-500">山田花子</div>
              <div class="text-xs text-yellow-600">待機中</div>
            </div>
            <div class="text-center">
              <div class="approval-step pending">
                <i class="fas fa-crown text-yellow-600"></i>
              </div>
              <div class="mt-2 text-xs font-medium">役員承認</div>
              <div class="text-xs text-gray-500">鈴木常務</div>
              <div class="text-xs text-yellow-600">待機中</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
      <!-- メインコンテンツ -->
      <div class="xl:col-span-2 space-y-6">
        
        <!-- Copilotアシスタント -->
        <div class="copilot-suggestion card-hover">
          <div class="flex items-center mb-3">
            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-xl flex items-center justify-center mr-3">
              <i class="fas fa-robot text-white"></i>
            </div>
            <div>
              <h3 class="text-white font-bold">Copilot アシスタント</h3>
              <p class="text-white text-opacity-80 text-sm">AI支援による発注分析</p>
            </div>
          </div>
          
          <div class="space-y-3">
            <!-- 価格分析 -->
            <div class="bg-white bg-opacity-10 rounded-lg p-3">
              <div class="flex items-center mb-2">
                <i class="fas fa-chart-line text-white mr-2"></i>
                <span class="text-white font-medium text-sm">価格適正性分析</span>
              </div>
              <div class="text-white text-opacity-90 text-sm space-y-1">
                <div>• 高効率空調機の市場価格より<span class="font-bold text-yellow-300">15%高め</span></div>
                <div>• 類似仕様での過去3案件平均: <span class="font-bold">¥7,800,000/台</span></div>
                <div>• 推奨交渉余地: <span class="font-bold text-green-300">5-8%程度</span></div>
              </div>
            </div>
            
            <!-- 予算分析 -->
            <div class="bg-white bg-opacity-10 rounded-lg p-3">
              <div class="flex items-center mb-2">
                <i class="fas fa-exclamation-triangle text-yellow-300 mr-2"></i>
                <span class="text-white font-medium text-sm">予算影響分析</span>
              </div>
              <div class="text-white text-opacity-90 text-sm space-y-1">
                <div>• 当期設備予算に対し<span class="font-bold text-yellow-300">108%の使用率</span></div>
                <div>• 予算超過額: <span class="font-bold text-red-300">¥4,200,000</span></div>
                <div>• 来期予算からの前倒し調整が<span class="font-bold text-green-300">推奨</span></div>
              </div>
            </div>
            
            <!-- 業者評価 -->
            <div class="bg-white bg-opacity-10 rounded-lg p-3">
              <div class="flex items-center mb-2">
                <i class="fas fa-star text-yellow-300 mr-2"></i>
                <span class="text-white font-medium text-sm">業者評価・リスク</span>
              </div>
              <div class="text-white text-opacity-90 text-sm space-y-1">
                <div>• XYZ空調サービス: <span class="font-bold text-green-300">信頼度A+</span></div>
                <div>• 過去5年実績: 納期遵守率<span class="font-bold">98%</span>、品質評価<span class="font-bold">4.7/5.0</span></div>
                <div>• リスク要因: <span class="font-bold text-yellow-300">繁忙期につき納期に注意</span></div>
              </div>
            </div>
          </div>
          
          <div class="flex space-x-2 mt-4">
            <button class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg text-sm transition-all">
              <i class="fas fa-download mr-1"></i>詳細分析
            </button>
            <button class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg text-sm transition-all">
              <i class="fas fa-comments mr-1"></i>交渉提案
            </button>
          </div>
        </div>

        <!-- 発注内容詳細 -->
        <div class="bg-white rounded-2xl shadow-lg p-6 card-hover">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold text-gray-800 flex items-center">
              <i class="fas fa-list-alt text-blue-600 mr-2"></i>
              発注内容詳細
            </h3>
            <div class="flex items-center space-x-2">
              <span class="impact-badge bg-blue-100 text-blue-800">高効率機種</span>
              <span class="impact-badge bg-green-100 text-green-800">省エネ対応</span>
              <span class="impact-badge bg-purple-100 text-purple-800">優先案件</span>
            </div>
          </div>

          <!-- 発注明細テーブル -->
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="bg-gray-50 border-b">
                  <th class="text-left p-3 font-medium text-gray-700">No</th>
                  <th class="text-left p-3 font-medium text-gray-700">品名・仕様</th>
                  <th class="text-left p-3 font-medium text-gray-700">型番</th>
                  <th class="text-center p-3 font-medium text-gray-700">数量</th>
                  <th class="text-right p-3 font-medium text-gray-700">単価</th>
                  <th class="text-right p-3 font-medium text-gray-700">金額</th>
                  <th class="text-center p-3 font-medium text-gray-700">状態</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-b hover:bg-gray-50">
                  <td class="p-3">1</td>
                  <td class="p-3">
                    <div class="font-medium text-gray-800">高効率空調機(省エネ型)</div>
                    <div class="text-xs text-gray-500">冷房能力28kW・暖房能力31.5kW・SEER5.8</div>
                  </td>
                  <td class="p-3">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">AC-5000EX</span>
                  </td>
                  <td class="p-3 text-center">
                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium">5台</span>
                  </td>
                  <td class="p-3 text-right">
                    <div class="font-medium">¥8,500,000</div>
                    <div class="text-xs text-red-500">市場価格+15%</div>
                  </td>
                  <td class="p-3 text-right">
                    <div class="font-bold text-lg">¥42,500,000</div>
                  </td>
                  <td class="p-3 text-center">
                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">要確認</span>
                  </td>
                </tr>
                <tr class="border-b hover:bg-gray-50">
                  <td class="p-3">2</td>
                  <td class="p-3">
                    <div class="font-medium text-gray-800">制御装置(IoT対応)</div>
                    <div class="text-xs text-gray-500">集中制御・遠隔監視・AI省エネ制御</div>
                  </td>
                  <td class="p-3">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">CT-3200AI</span>
                  </td>
                  <td class="p-3 text-center">
                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium">1式</span>
                  </td>
                  <td class="p-3 text-right">
                    <div class="font-medium">¥3,800,000</div>
                    <div class="text-xs text-green-500">市場価格相当</div>
                  </td>
                  <td class="p-3 text-right">
                    <div class="font-bold text-lg">¥3,800,000</div>
                  </td>
                  <td class="p-3 text-center">
                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">適正</span>
                  </td>
                </tr>
                <tr class="border-b hover:bg-gray-50">
                  <td class="p-3">3</td>
                  <td class="p-3">
                    <div class="font-medium text-gray-800">設置工事一式</div>
                    <div class="text-xs text-gray-500">機器設置・配管配線・試運転・引渡し</div>
                  </td>
                  <td class="p-3">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">INST-2025</span>
                  </td>
                  <td class="p-3 text-center">
                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium">1式</span>
                  </td>
                  <td class="p-3 text-right">
                    <div class="font-medium">¥6,500,000</div>
                    <div class="text-xs text-green-500">標準工事費</div>
                  </td>
                  <td class="p-3 text-right">
                    <div class="font-bold text-lg">¥6,500,000</div>
                  </td>
                  <td class="p-3 text-center">
                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">適正</span>
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr class="bg-gray-100 font-bold">
                  <td colspan="5" class="p-3 text-right">小計</td>
                  <td class="p-3 text-right">¥52,800,000</td>
                  <td class="p-3"></td>
                </tr>
                <tr class="bg-gray-100">
                  <td colspan="5" class="p-3 text-right">消費税(10%)</td>
                  <td class="p-3 text-right font-bold">¥5,280,000</td>
                  <td class="p-3"></td>
                </tr>
                <tr class="bg-blue-50 border-t-2 border-blue-200">
                  <td colspan="5" class="p-3 text-right text-lg font-bold text-blue-800">合計金額</td>
                  <td class="p-3 text-right text-2xl font-bold text-blue-800">¥58,080,000</td>
                  <td class="p-3"></td>
                </tr>
              </tfoot>
            </table>
          </div>

          <!-- 技術仕様補足 -->
          <div class="mt-4 p-4 bg-blue-50 rounded-lg">
            <h4 class="font-semibold text-blue-800 mb-2 flex items-center">
              <i class="fas fa-cogs mr-2"></i>
              技術仕様・選定理由
            </h4>
            <div class="text-sm text-blue-700 space-y-1">
              <div>• 省エネ性能: SEER値5.8で従来比約25%の省エネ効果</div>
              <div>• IoT機能: 遠隔監視・AI制御により運用コスト削減</div>
              <div>• 耐久性: 設計寿命15年、メンテナンス性優秀</div>
              <div>• 適合性: ABC工場の設置環境・負荷条件に最適</div>
            </div>
          </div>
        </div>

        <!-- 類似発注履歴・価格比較 -->
        <div class="bg-white rounded-2xl shadow-lg p-6 card-hover">
          <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
            <i class="fas fa-history text-green-600 mr-2"></i>
            類似発注履歴・価格比較
          </h3>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <!-- 価格推移グラフ -->
            <div class="price-comparison p-4">
              <h4 class="font-medium text-gray-800 mb-3">同仕様機器の価格推移</h4>
              <canvas id="priceChart" width="400" height="200"></canvas>
            </div>
            
            <!-- 業者比較 -->
            <div class="price-comparison p-4">
              <h4 class="font-medium text-gray-800 mb-3">業者評価比較</h4>
              <div class="space-y-3">
                <div class="flex items-center justify-between p-2 bg-white rounded">
                  <div>
                    <div class="font-medium text-sm">XYZ空調サービス</div>
                    <div class="vendor-rating">
                      <i class="fas fa-star star-rating"></i>
                      <i class="fas fa-star star-rating"></i>
                      <i class="fas fa-star star-rating"></i>
                      <i class="fas fa-star star-rating"></i>
                      <i class="fas fa-star star-rating"></i>
                      <span class="text-xs text-gray-500 ml-1">4.2/5.0</span>
                    </div>
                  </div>
                  <div class="text-right">
                    <div class="text-sm font-bold">¥7,800,000</div>
                    <div class="text-xs text-green-500">標準価格</div>
                  </div>
                </div>
                <div class="flex items-center justify-between p-2 bg-white rounded">
                  <div>
                    <div class="font-medium text-sm">DEF機械設備</div>
                    <div class="vendor-rating">
                      <i class="fas fa-star star-rating"></i>
                      <i class="fas fa-star star-rating"></i>
                      <i class="fas fa-star star-rating"></i>
                      <i class="far fa-star text-gray-300"></i>
                      <i class="far fa-star text-gray-300"></i>
                      <span class="text-xs text-gray-500 ml-1">3.5/5.0</span>
                    </div>
                  </div>
                  <div class="text-right">
                    <div class="text-sm font-bold">¥7,200,000</div>
                    <div class="text-xs text-blue-500">-8%</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 類似案件履歴 -->
          <div class="border-t pt-4">
            <h4 class="font-medium text-gray-800 mb-3">過去3年の類似発注実績</h4>
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <thead>
                  <tr class="bg-gray-50">
                    <th class="text-left p-2">案件</th>
                    <th class="text-left p-2">業者</th>
                    <th class="text-center p-2">台数</th>
                    <th class="text-right p-2">単価</th>
                    <th class="text-center p-2">評価</th>
                    <th class="text-center p-2">納期</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="border-b">
                    <td class="p-2">JKL工場 (2024/08)</td>
                    <td class="p-2">XYZ空調サービス</td>
                    <td class="p-2 text-center">3台</td>
                    <td class="p-2 text-right">¥7,800,000</td>
                    <td class="p-2 text-center"><span class="text-green-600">◎</span></td>
                    <td class="p-2 text-center"><span class="text-green-600">予定通り</span></td>
                  </tr>
                  <tr class="border-b">
                    <td class="p-2">MNO事業所 (2024/03)</td>
                    <td class="p-2">ABC設備工業</td>
                    <td class="p-2 text-center">6台</td>
                    <td class="p-2 text-right">¥7,650,000</td>
                    <td class="p-2 text-center"><span class="text-blue-600">○</span></td>
                    <td class="p-2 text-center"><span class="text-yellow-600">1週遅延</span></td>
                  </tr>
                  <tr class="border-b">
                    <td class="p-2">PQR本社 (2023/11)</td>
                    <td class="p-2">XYZ空調サービス</td>
                    <td class="p-2 text-center">4台</td>
                    <td class="p-2 text-right">¥7,900,000</td>
                    <td class="p-2 text-center"><span class="text-green-600">◎</span></td>
                    <td class="p-2 text-center"><span class="text-green-600">予定通り</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- 添付ファイル・関連資料 -->
        <div class="bg-white rounded-2xl shadow-lg p-6 card-hover">
          <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
            <i class="fas fa-paperclip text-purple-600 mr-2"></i>
            添付ファイル・関連資料
          </h3>
          
          <div class="attachment-grid">
            <div class="file-preview card-hover">
              <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-2">
                <i class="fas fa-file-pdf text-red-600 text-xl"></i>
              </div>
              <div class="text-sm font-medium text-gray-800">XYZ見積書_20250519.pdf</div>
              <div class="text-xs text-gray-500">2.1MB</div>
              <div class="mt-2 flex justify-center space-x-1">
                <button class="p-1 text-blue-600 hover:bg-blue-100 rounded">
                  <i class="fas fa-eye text-xs"></i>
                </button>
                <button class="p-1 text-green-600 hover:bg-green-100 rounded">
                  <i class="fas fa-download text-xs"></i>
                </button>
              </div>
            </div>
            
            <div class="file-preview card-hover">
              <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2">
                <i class="fas fa-file-excel text-green-600 text-xl"></i>
              </div>
              <div class="text-sm font-medium text-gray-800">比較検討表.xlsx</div>
              <div class="text-xs text-gray-500">856KB</div>
              <div class="mt-2 flex justify-center space-x-1">
                <button class="p-1 text-blue-600 hover:bg-blue-100 rounded">
                  <i class="fas fa-eye text-xs"></i>
                </button>
                <button class="p-1 text-green-600 hover:bg-green-100 rounded">
                  <i class="fas fa-download text-xs"></i>
                </button>
              </div>
            </div>
            
            <div class="file-preview card-hover">
              <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-2">
                <i class="fas fa-file-word text-blue-600 text-xl"></i>
              </div>
              <div class="text-sm font-medium text-gray-800">予算申請書(承認済).pdf</div>
              <div class="text-xs text-gray-500">1.3MB</div>
              <div class="mt-2 flex justify-center space-x-1">
                <button class="p-1 text-blue-600 hover:bg-blue-100 rounded">
                  <i class="fas fa-eye text-xs"></i>
                </button>
                <button class="p-1 text-green-600 hover:bg-green-100 rounded">
                  <i class="fas fa-download text-xs"></i>
                </button>
              </div>
            </div>
            
            <div class="file-preview card-hover">
              <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-2">
                <i class="fas fa-file-image text-orange-600 text-xl"></i>
              </div>
              <div class="text-sm font-medium text-gray-800">設置場所写真.jpg</div>
              <div class="text-xs text-gray-500">4.2MB</div>
              <div class="mt-2 flex justify-center space-x-1">
                <button class="p-1 text-blue-600 hover:bg-blue-100 rounded">
                  <i class="fas fa-eye text-xs"></i>
                </button>
                <button class="p-1 text-green-600 hover:bg-green-100 rounded">
                  <i class="fas fa-download text-xs"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- ファイル管理連携 -->
          <div class="mt-4 p-4 bg-purple-50 rounded-lg">
            <div class="flex items-center justify-between">
              <div>
                <h4 class="font-semibold text-purple-800 mb-1">統合ファイル管理連携</h4>
                <div class="text-sm text-purple-600">プロジェクトフォルダ: 2025-ME0123_ABC工場省エネ設備導入</div>
              </div>
              <button class="px-4 py-2 bg-purple-600 text-white rounded-lg text-sm hover:bg-purple-700">
                <i class="fas fa-folder-open mr-1"></i>フォルダを開く
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 右サイドバー -->
      <div class="xl:col-span-1 space-y-6">
        
        <!-- 予算分析 -->
        <div class="bg-white rounded-2xl shadow-lg p-6 card-hover">
          <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <i class="fas fa-calculator text-green-600 mr-2"></i>
            予算分析
          </h3>
          
          <!-- 予算ゲージ -->
          <div class="budget-gauge mb-4">
            <svg viewBox="0 0 120 120">
              <circle cx="60" cy="60" r="54" class="gauge-bg"></circle>
              <circle cx="60" cy="60" r="54" class="gauge-fill over-budget" 
                      stroke-dasharray="290 340" stroke-dashoffset="50"></circle>
            </svg>
            <div class="absolute inset-0 flex flex-col items-center justify-center">
              <div class="text-2xl font-bold text-red-600">108%</div>
              <div class="text-xs text-gray-500">予算使用率</div>
            </div>
          </div>
          
          <div class="space-y-3 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-600">年間予算</span>
              <span class="font-medium">¥54,000,000</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">使用済み</span>
              <span class="font-medium">¥3,720,000</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">今回発注</span>
              <span class="font-bold text-blue-600">¥58,080,000</span>
            </div>
            <div class="border-t pt-2 flex justify-between">
              <span class="text-gray-600">予算超過額</span>
              <span class="font-bold text-red-600">¥4,200,000</span>
            </div>
          </div>
          
          <div class="mt-4 p-3 bg-orange-50 rounded-lg border-l-4 border-orange-400">
            <div class="flex items-center">
              <i class="fas fa-exclamation-triangle text-orange-600 mr-2"></i>
              <div class="text-sm">
                <div class="font-medium text-orange-800">予算調整が必要</div>
                <div class="text-orange-600">来期予算からの前倒し承認要</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 業者情報 -->
        <div class="bg-white rounded-2xl shadow-lg p-6 card-hover">
          <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <i class="fas fa-building text-blue-600 mr-2"></i>
            業者詳細情報
          </h3>
          
          <div class="space-y-4">
            <div class="flex items-center space-x-3">
              <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                <i class="fas fa-industry text-blue-600"></i>
              </div>
              <div>
                <div class="font-bold text-gray-800">XYZ空調サービス株式会社</div>
                <div class="text-sm text-gray-500">設立: 1985年 | 資本金: 5億円</div>
              </div>
            </div>
            
            <!-- 評価指標 -->
            <div class="grid grid-cols-2 gap-4">
              <div class="text-center p-3 bg-green-50 rounded-lg">
                <div class="text-2xl font-bold text-green-600">4.8</div>
                <div class="text-xs text-gray-500">総合評価</div>
              </div>
              <div class="text-center p-3 bg-blue-50 rounded-lg">
                <div class="text-2xl font-bold text-blue-600">98%</div>
                <div class="text-xs text-gray-500">納期遵守率</div>
              </div>
              <div class="text-center p-3 bg-purple-50 rounded-lg">
                <div class="text-2xl font-bold text-purple-600">A+</div>
                <div class="text-xs text-gray-500">信用格付</div>
              </div>
              <div class="text-center p-3 bg-orange-50 rounded-lg">
                <div class="text-2xl font-bold text-orange-600">15年</div>
                <div class="text-xs text-gray-500">取引実績</div>
              </div>
            </div>
            
            <!-- 最近の実績 -->
            <div>
              <h4 class="font-medium text-gray-800 mb-2">最近の取引実績</h4>
              <div class="space-y-2">
                <div class="text-sm p-2 bg-gray-50 rounded">
                  <div class="font-medium">JKL工場空調更新 (2024/08)</div>
                  <div class="text-gray-500">¥23,400,000 | 品質評価: ◎</div>
                </div>
                <div class="text-sm p-2 bg-gray-50 rounded">
                  <div class="font-medium">PQR本社設備導入 (2023/11)</div>
                  <div class="text-gray-500">¥31,600,000 | 品質評価: ◎</div>
                </div>
              </div>
            </div>
            
            <!-- 認証・資格 -->
            <div>
              <h4 class="font-medium text-gray-800 mb-2">保有認証・資格</h4>
              <div class="flex flex-wrap gap-1">
                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">ISO9001</span>
                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">ISO14001</span>
                <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">管工事業許可</span>
                <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded">電気工事業許可</span>
              </div>
            </div>
          </div>
        </div>

        <!-- 納期・スケジュール -->
        <div class="bg-white rounded-2xl shadow-lg p-6 card-hover">
          <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <i class="fas fa-calendar-alt text-purple-600 mr-2"></i>
            納期・スケジュール
          </h3>
          
          <div class="space-y-4">
            <!-- 納期情報 -->
            <div class="p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
              <div class="font-medium text-blue-800 mb-2">納期予定</div>
              <div class="text-sm text-blue-700 space-y-1">
                <div>• 機器製造: 6週間 (承認後)</div>
                <div>• 現地搬入: 7月末予定</div>
                <div>• 設置完了: 8月末予定</div>
                <div>• 試運転完了: 9月上旬予定</div>
              </div>
            </div>
            
            <!-- クリティカルパス -->
            <div>
              <h4 class="font-medium text-gray-800 mb-3">工程スケジュール</h4>
              <div class="space-y-2">
                <div class="timeline-item">
                  <div class="font-medium text-sm">発注承認・契約</div>
                  <div class="text-xs text-gray-500">~5/25 (承認後3営業日)</div>
                </div>
                <div class="timeline-item">
                  <div class="font-medium text-sm">詳細設計・製造開始</div>
                  <div class="text-xs text-gray-500">5/26~7/15 (7週間)</div>
                </div>
                <div class="timeline-item">
                  <div class="font-medium text-sm">工場検査・出荷</div>
                  <div class="text-xs text-gray-500">7/16~7/20</div>
                </div>
                <div class="timeline-item">
                  <div class="font-medium text-sm">現地搬入・設置工事</div>
                  <div class="text-xs text-gray-500">7/21~8/31 (6週間)</div>
                </div>
                <div class="timeline-item">
                  <div class="font-medium text-sm">試運転・引渡し</div>
                  <div class="text-xs text-gray-500">9/1~9/10</div>
                </div>
              </div>
            </div>
            
            <!-- リスクアラート -->
            <div class="p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400">
              <div class="flex items-center">
                <i class="fas fa-clock text-yellow-600 mr-2"></i>
                <div class="text-sm">
                  <div class="font-medium text-yellow-800">納期注意事項</div>
                  <div class="text-yellow-700">繁忙期につき承認遅延は納期に影響</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- コメント・履歴 -->
        <div class="bg-white rounded-2xl shadow-lg p-6 card-hover">
          <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <i class="fas fa-comments text-indigo-600 mr-2"></i>
            コメント・履歴
          </h3>
          
          <div class="space-y-4">
            <!-- 申請者コメント -->
            <div class="p-3 bg-blue-50 rounded-lg">
              <div class="flex items-center mb-2">
                <div class="w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-2">
                  佐
                </div>
                <div>
                  <div class="font-medium text-sm">佐藤健太 (申請者)</div>
                  <div class="text-xs text-gray-500">2025/05/20 09:15</div>
                </div>
              </div>
              <div class="text-sm text-gray-700">
                省エネ性能が高い機種を選定しました。初期コストは増加しますが、3年で回収可能な見込みです。顧客要望により高効率仕様が必須のため、この機種が最適と判断します。
              </div>
            </div>
            
            <!-- システム履歴 -->
            <div class="space-y-2">
              <div class="flex items-center text-sm">
                <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2">
                  <i class="fas fa-check text-green-600 text-xs"></i>
                </div>
                <div>
                  <span class="font-medium">Copilot価格分析完了</span>
                  <span class="text-gray-500 text-xs ml-2">10:30</span>
                </div>
              </div>
              <div class="flex items-center text-sm">
                <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2">
                  <i class="fas fa-upload text-blue-600 text-xs"></i>
                </div>
                <div>
                  <span class="font-medium">見積書ファイル追加</span>
                  <span class="text-gray-500 text-xs ml-2">09:45</span>
                </div>
              </div>
              <div class="flex items-center text-sm">
                <div class="w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2">
                  <i class="fas fa-paper-plane text-purple-600 text-xs"></i>
                </div>
                <div>
                  <span class="font-medium">承認申請提出</span>
                  <span class="text-gray-500 text-xs ml-2">09:15</span>
                </div>
              </div>
            </div>
            
            <!-- コメント入力 -->
            <div class="border-t pt-4">
              <textarea 
                placeholder="承認コメントを入力..." 
                class="w-full p-3 border border-gray-300 rounded-lg text-sm resize-none"
                rows="3"></textarea>
              <div class="flex justify-end mt-2">
                <button class="px-3 py-1 bg-gray-500 text-white rounded text-sm hover:bg-gray-600">
                  <i class="fas fa-comment mr-1"></i>コメント追加
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- 承認アクションバー -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg p-4">
      <div class="container mx-auto flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <div class="text-sm text-gray-600">
            <span class="font-medium">発注金額:</span>
            <span class="text-2xl font-bold text-blue-600 ml-2">¥58,080,000</span>
          </div>
          <div class="text-sm text-gray-600">
            <span class="font-medium">承認期限:</span>
            <span class="text-red-600 font-bold ml-2">2025/05/22 17:00</span>
          </div>
        </div>
        
        <div class="flex items-center space-x-3">
          <!-- 承認オプション -->
          <div class="flex items-center space-x-2">
            <label class="flex items-center text-sm">
              <input type="checkbox" class="mr-2">
              <span>条件付き承認</span>
            </label>
            <label class="flex items-center text-sm">
              <input type="checkbox" class="mr-2">
              <span>価格交渉指示</span>
            </label>
          </div>
          
          <!-- アクションボタン -->
          <button class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
            <i class="fas fa-download mr-2"></i>資料DL
          </button>
          <button class="px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors">
            <i class="fas fa-undo mr-2"></i>差戻し
          </button>
          <button class="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
            <i class="fas fa-times mr-2"></i>却下
          </button>
          <button class="px-8 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 transition-all shadow-lg">
            <i class="fas fa-check mr-2"></i>承認する
          </button>
        </div>
      </div>
    </div>

    <!-- 余白（固定バー用） -->
    <div class="h-20"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 価格推移チャート
      const ctx = document.getElementById('priceChart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['2023/Q1', '2023/Q2', '2023/Q3', '2023/Q4', '2024/Q1', '2024/Q2', '2024/Q3', '2024/Q4', '2025/Q1'],
          datasets: [{
            label: '同仕様機器単価',
            data: [8200000, 8100000, 7900000, 7800000, 7750000, 7800000, 7900000, 8000000, 8200000],
            borderColor: 'rgb(59, 130, 246)',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            tension: 0.4,
            fill: true
          }, {
            label: '今回見積価格',
            data: [null, null, null, null, null, null, null, null, 8500000],
            borderColor: 'rgb(239, 68, 68)',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            pointBackgroundColor: 'rgb(239, 68, 68)',
            pointBorderColor: 'rgb(239, 68, 68)',
            pointRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: true,
              position: 'bottom'
            }
          },
          scales: {
            y: {
              beginAtZero: false,
              min: 7000000,
              max: 9000000,
              ticks: {
                callback: function(value) {
                  return '¥' + (value / 1000000).toFixed(1) + 'M';
                }
              }
            }
          }
        }
      });

      // カードホバー効果
      const cards = document.querySelectorAll('.card-hover');
      cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
          this.style.transform = 'translateY(-2px)';
        });
        card.addEventListener('mouseleave', function() {
          this.style.transform = 'translateY(0)';
        });
      });

      // 承認ボタンのクリック処理
      const approveButton = document.querySelector('.bg-gradient-to-r.from-green-600');
      if (approveButton) {
        approveButton.addEventListener('click', function() {
          if (confirm('この発注を承認しますか？\n\n発注金額: ¥58,080,000\n業者: XYZ空調サービス株式会社')) {
            // 承認処理のシミュレーション
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>処理中...';
            this.disabled = true;
            
            setTimeout(() => {
              showNotification('発注承認が完了しました。次の承認者（経理部長）に通知されました。', 'success');
              
              // 承認ステップの更新
              const currentStep = document.querySelector('.approval-step.current');
              const nextStep = currentStep.parentElement.nextElementSibling.querySelector('.approval-step');
              
              currentStep.classList.remove('current');
              currentStep.classList.add('completed');
              currentStep.innerHTML = '<i class="fas fa-check text-green-600"></i>';
              currentStep.parentElement.querySelector('.text-blue-600').textContent = '承認済';
              currentStep.parentElement.querySelector('.text-blue-600').className = 'text-xs text-green-600';
              
              if (nextStep) {
                nextStep.classList.remove('pending');
                nextStep.classList.add('current');
                nextStep.parentElement.querySelector('.text-yellow-600').textContent = '承認待ち';
                nextStep.parentElement.querySelector('.text-yellow-600').className = 'text-xs text-blue-600';
              }
              
              // アクションバーを非表示
              document.querySelector('.fixed.bottom-0').style.display = 'none';
              
            }, 2000);
          }
        });
      }

      // 差戻しボタンのクリック処理
      const rejectButton = document.querySelector('.bg-yellow-600');
      if (rejectButton) {
        rejectButton.addEventListener('click', function() {
          const reason = prompt('差戻し理由を入力してください：');
          if (reason && reason.trim()) {
            showNotification(`発注申請を差戻ししました。理由: ${reason}`, 'warning');
            
            // コメント欄に差戻し理由を追加
            const commentSection = document.querySelector('.space-y-4');
            const newComment = document.createElement('div');
            newComment.className = 'p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400';
            newComment.innerHTML = `
              <div class="flex items-center mb-2">
                <div class="w-8 h-8 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-2">
                  田
                </div>
                <div>
                  <div class="font-medium text-sm">田中修一 (技術部長)</div>
                  <div class="text-xs text-gray-500">${new Date().toLocaleString('ja-JP')}</div>
                </div>
              </div>
              <div class="text-sm text-gray-700">
                <span class="font-medium text-yellow-800">[差戻し] </span>${reason}
              </div>
            `;
            commentSection.insertBefore(newComment, commentSection.lastElementChild);
          }
        });
      }

      // 却下ボタンのクリック処理
      const denyButton = document.querySelector('.bg-red-600');
      if (denyButton) {
        denyButton.addEventListener('click', function() {
          const reason = prompt('却下理由を入力してください：');
          if (reason && reason.trim()) {
            if (confirm('この発注申請を却下しますか？\nこの操作は取り消せません。')) {
              showNotification(`発注申請を却下しました。理由: ${reason}`, 'error');
              
              // 承認フローを却下状態に更新
              const currentStep = document.querySelector('.approval-step.current');
              currentStep.classList.remove('current');
              currentStep.classList.add('pending');
              currentStep.style.borderColor = '#ef4444';
              currentStep.style.backgroundColor = '#fee2e2';
              currentStep.innerHTML = '<i class="fas fa-times text-red-600"></i>';
              currentStep.parentElement.querySelector('.text-blue-600').textContent = '却下';
              currentStep.parentElement.querySelector('.text-blue-600').className = 'text-xs text-red-600';
            }
          }
        });
      }

      // ファイルプレビュー機能
      const filePreviewButtons = document.querySelectorAll('.fa-eye');
      filePreviewButtons.forEach(button => {
        button.addEventListener('click', function() {
          const fileName = this.closest('.file-preview').querySelector('.font-medium').textContent;
          showNotification(`${fileName} をプレビューします`, 'info');
        });
      });

      // ダウンロード機能
      const downloadButtons = document.querySelectorAll('.fa-download');
      downloadButtons.forEach(button => {
        button.addEventListener('click', function() {
          const fileName = this.closest('.file-preview').querySelector('.font-medium').textContent;
          showNotification(`${fileName} をダウンロードしました`, 'success');
        });
      });

      // フォルダ連携ボタン
      const folderButton = document.querySelector('.bg-purple-600');
      if (folderButton) {
        folderButton.addEventListener('click', function() {
          showNotification('統合ファイル管理システムでプロジェクトフォルダを開いています...', 'info');
        });
      }

      // Copilotアシスタント詳細分析
      const detailAnalysisButton = document.querySelector('.bg-white.bg-opacity-20');
      if (detailAnalysisButton && detailAnalysisButton.textContent.includes('詳細分析')) {
        detailAnalysisButton.addEventListener('click', function() {
          showNotification('Copilot詳細分析レポートを生成しています...', 'info');
        });
      }

      // 交渉提案ボタン
      const negotiationButton = document.querySelectorAll('.bg-white.bg-opacity-20')[1];
      if (negotiationButton) {
        negotiationButton.addEventListener('click', function() {
          showNotification('価格交渉提案書を自動生成しています...', 'info');
        });
      }

      // 条件付き承認チェックボックス
      const conditionalApproval = document.querySelector('input[type="checkbox"]');
      if (conditionalApproval) {
        conditionalApproval.addEventListener('change', function() {
          if (this.checked) {
            showNotification('条件付き承認が選択されました', 'info');
          }
        });
      }

      // 価格交渉指示チェックボックス
      const priceNegotiation = document.querySelectorAll('input[type="checkbox"]')[1];
      if (priceNegotiation) {
        priceNegotiation.addEventListener('change', function() {
          if (this.checked) {
            showNotification('価格交渉指示が選択されました', 'info');
          }
        });
      }

      // 予算ゲージアニメーション
      function animateBudgetGauge() {
        const gauge = document.querySelector('.gauge-fill');
        if (gauge) {
          const percentage = 108;
          const circumference = 2 * Math.PI * 54;
          const offset = circumference - (percentage / 100) * circumference;
          
          setTimeout(() => {
            gauge.style.strokeDasharray = `${circumference} ${circumference}`;
            gauge.style.strokeDashoffset = offset;
          }, 500);
        }
      }

      // コメント追加機能
      const commentButton = document.querySelector('.bg-gray-500');
      const commentTextarea = document.querySelector('textarea');
      if (commentButton && commentTextarea) {
        commentButton.addEventListener('click', function() {
          const comment = commentTextarea.value.trim();
          if (comment) {
            const commentSection = document.querySelector('.space-y-4');
            const newComment = document.createElement('div');
            newComment.className = 'p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400';
            newComment.innerHTML = `
              <div class="flex items-center mb-2">
                <div class="w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-2">
                  田
                </div>
                <div>
                  <div class="font-medium text-sm">田中修一 (技術部長)</div>
                  <div class="text-xs text-gray-500">${new Date().toLocaleString('ja-JP')}</div>
                </div>
              </div>
              <div class="text-sm text-gray-700">${comment}</div>
            `;
            commentSection.insertBefore(newComment, commentSection.lastElementChild);
            commentTextarea.value = '';
            showNotification('コメントを追加しました', 'success');
          }
        });
      }

      // 資料ダウンロードボタン
      const downloadAllButton = document.querySelector('.bg-gray-500');
      if (downloadAllButton && downloadAllButton.textContent.includes('資料DL')) {
        downloadAllButton.addEventListener('click', function() {
          showNotification('全資料をZIPファイルでダウンロードしています...', 'info');
        });
      }

      // 業者評価ホバー効果
      const vendorRatings = document.querySelectorAll('.vendor-rating');
      vendorRatings.forEach(rating => {
        rating.addEventListener('mouseenter', function() {
          this.style.transform = 'scale(1.1)';
        });
        rating.addEventListener('mouseleave', function() {
          this.style.transform = 'scale(1)';
        });
      });

      // 承認期限カウントダウン（シミュレーション）
      function updateDeadlineCountdown() {
        const deadlineText = document.querySelector('.text-red-600.font-bold');
        if (deadlineText) {
          const deadline = new Date('2025-05-22T17:00:00');
          const now = new Date();
          const diff = deadline - now;
          
          if (diff > 0) {
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            deadlineText.textContent = `残り ${hours}時間${minutes}分`;
          }
        }
      }

      // 初期化処理
      animateBudgetGauge();
      updateDeadlineCountdown();
      setInterval(updateDeadlineCountdown, 60000); // 1分ごとに更新

      // ページ読み込み時のアニメーション
      const elements = document.querySelectorAll('.card-hover');
      elements.forEach((element, index) => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
          element.style.transition = 'all 0.3s ease';
          element.style.opacity = '1';
          element.style.transform = 'translateY(0)';
        }, index * 100);
      });

      // ウェルカムメッセージ
      setTimeout(() => {
        showNotification('発注承認システムへようこそ。Copilot分析結果をご確認ください。', 'success');
      }, 1000);
    });

    // 通知表示関数
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      const bgColor = {
        'success': 'bg-green-500',
        'warning': 'bg-yellow-500',
        'error': 'bg-red-500',
        'info': 'bg-blue-500'
      }[type] || 'bg-blue-500';
      
      const icon = {
        'success': 'fas fa-check',
        'warning': 'fas fa-exclamation-triangle',
        'error': 'fas fa-times',
        'info': 'fas fa-info-circle'
      }[type] || 'fas fa-info-circle';
      
      notification.className = `fixed top-4 right-4 ${bgColor} text-white px-4 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 max-w-md`;
      notification.innerHTML = `<i class="${icon} mr-2"></i>${message}`;
      notification.style.transform = 'translateX(100%)';
      
      document.body.appendChild(notification);
      
      // アニメーション
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // 自動削除
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 4000);
    }
  </script>
</body>
</html>1">4.8/5.0</span>
                    </div>
                  </div>
                  <div class="text-right">
                    <div class="text-sm font-bold">¥8,500,000</div>
                    <div class="text-xs text-red-500">+15%</div>
                  </div>
                </div>
                <div class="flex items-center justify-between p-2 bg-white rounded">
                  <div>
                    <div class="font-medium text-sm">ABC設備工業</div>
                    <div class="vendor-rating">
                      <i class="fas fa-star star-rating"></i>
                      <i class="fas fa-star star-rating"></i>
                      <i class="fas fa-star star-rating"></i>
                      <i class="fas fa-star star-rating"></i>
                      <i class="far fa-star text-gray-300"></i>
                      <span class="text-xs text-gray-500 ml-